---
layout: null
---
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd"
        xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
        xmlns:image="http://www.google.com/schemas/sitemap-image/1.1">

  {% assign collections_to_process = "" | split: "" %}
  {% assign collections_to_process = collections_to_process | push: site.specialized | push: site.commercial | push: site.residential | push: site.areas | push: site.posts %}
  
  <!-- Home page -->
  <url>
    <loc>{{ site.url }}{{ site.baseurl }}/</loc>
    <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>

  <!-- Process all collections -->
  {% for collection in collections_to_process %}
    {% for page in collection %}
      {% unless page.noindex or page.url contains '.xml' or page.url contains 'assets' or page.url contains '.css' %}
        <url>
          <loc>{{ site.url }}{{ site.baseurl }}{{ page.url }}</loc>
          
          {% if page.last_modified_at %}
            <lastmod>{{ page.last_modified_at | date_to_xmlschema }}</lastmod>
          {% elsif page.date %}
            <lastmod>{{ page.date | date_to_xmlschema }}</lastmod>
          {% else %}
            <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
          {% endif %}

          {% assign page_priority = '0.7' %}
          {% if page.collection == 'posts' %}
            {% assign page_priority = '0.6' %}
            <changefreq>monthly</changefreq>
          {% elsif page.collection == 'areas' %}
            {% assign page_priority = '0.8' %}
            <changefreq>weekly</changefreq>
          {% elsif page.collection == 'residential' or page.collection == 'commercial' %}
            {% assign page_priority = '0.9' %}
            <changefreq>weekly</changefreq>
          {% else %}
            <changefreq>monthly</changefreq>
          {% endif %}
          <priority>{{ page_priority }}</priority>

          {% if page.hero %}
            <image:image>
              <image:loc>{{ site.url }}{{ site.baseurl }}/{{ page.hero }}</image:loc>
              <image:title>{% if page.title_hero %}{{ page.title_hero }}{% else %}{{ page.title }}{% endif %}</image:title>
              <image:caption>{{ page.alt }}</image:caption>
            </image:image>
          {% endif %}

          {% if page.image %}
            <image:image>
              <image:loc>{{ site.url }}{{ site.baseurl }}/{{ page.image }}</image:loc>
              <image:title>{{ page.title }}</image:title>
              <image:caption>{{ page.image_alt | default: page.alt | default: page.title }}</image:caption>
            </image:image>
          {% endif %}

        </url>
      {% endunless %}
    {% endfor %}
  {% endfor %}

  <!-- Individual pages -->
  {% for page in site.html_pages %}
    {% unless page.noindex or page.url contains '.xml' or page.url contains 'assets' or page.url contains '.css' %}
      <url>
        <loc>{{ site.url }}{{ site.baseurl }}{{ page.url | replace: 'index.html', '' }}</loc>
        <lastmod>{{ site.time | date_to_xmlschema }}</lastmod>
        <changefreq>monthly</changefreq>
        <priority>0.8</priority>

        {% if page.hero %}
          <image:image>
            <image:loc>{{ site.url }}{{ site.baseurl }}/{{ page.hero }}</image:loc>
            <image:title>{% if page.title_hero %}{{ page.title_hero }}{% else %}{{ page.title }}{% endif %}</image:title>
            <image:caption>{{ page.alt }}</image:caption>
          </image:image>
        {% endif %}
      </url>
    {% endunless %}
  {% endfor %}

</urlset>